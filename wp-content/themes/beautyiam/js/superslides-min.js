/*! Superslides - v0.5.4-beta - 2013-04-02
* https://github.com/nicinabox/superslides
* Copyright (c) 2013 Nic Aitch; Licensed MIT */(function(){var e,t,n;n="superslides";e=jQuery;t=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=this;n==null&&(n={});this.options=e.extend({play:!1,slide_speed:"normal",slide_easing:"linear",pagination:!0,hashchange:!1,scrollable:!0,classes:{preserve:"preserve",nav:"slides-navigation",container:"slides-container",pagination:"slides-pagination"}},n);O=this;u=e(window);this.el=e(t);i=e("."+this.options.classes.container,t);r=i.children();o=e("<nav>",{"class":this.options.classes.pagination});s=e("<div>",{"class":"slides-control"});y=1;v=!1;D=u.width();d=u.height();m=function(){if(v)return;y=p();E();P.mobile=/mobile/i.test(navigator.userAgent);s=i.wrap(s).parent(".slides-control");k();C();M();a();P.start();return P};k=function(){e("body").css({margin:0});P.el.css({position:"relative",overflowX:"hidden",width:"100%"});s.css({position:"relative",transform:"translate3d(0)"});i.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative"});return L()};L=function(){return i.find("img").not("."+P.options.classes.preserve).css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1"})};C=function(){e("body").css({margin:0,overflow:"hidden"});P.el.css({height:d});s.css({width:D*y,left:-D});if(P.options.scrollable)return r.each(function(){if(e(".scrollable",this).length)return;e(this).wrapInner('<div class="scrollable" />');return e(this).find("img").not("."+P.options.classes.preserve).insertBefore(e(".scrollable",this))})};N=function(){if(r.is("img")){r.wrap("<div>");r=i.children()}i.children().css({display:"none",position:"absolute",overflow:"hidden",top:0,left:D,zIndex:0});return c(r)};M=function(){return P.size()>1?e("."+P.options.classes.nav).show():e("."+P.options.classes.nav).hide()};A=function(){return e("."+P.options.classes.nav+" a").each(function(){return e(this).hasClass("next")?this.hash=O.next:this.hash=O.prev})};f=function(t){t>=0||(t=P.size()-1);return o.append(e("<a>",{href:"#"+t,"class":P.current===o.children().length?"current":void 0}))};a=function(){var n,r;if(!P.options.pagination||P.size()===1)return;if(e(t).find("."+P.options.classes.pagination).length){r=o.children().last().index()+1;n=i.children();n=n.slice(r)}else{r=0;n=new Array(P.size()-r);o=o.appendTo(P.el)}return e.each(n,function(e){return f(e+r)})};g=function(t,n){return e("<img>",{src:""+t.attr("src")+"?"+(new Date).getTime()}).load(function(){if(typeof n=="function")return n(this)})};T=function(e){var t;t=D/e.data("aspect-ratio");return t>=d?e.css({top:-(t-d)/2}):e.css({top:0})};x=function(e){var t;t=d*e.data("aspect-ratio");return t>=D?e.css({left:-(t-D)/2}):e.css({left:0})};l=function(e){if(!e.data("aspect-ratio")){g(e,function(t){e.removeAttr("width").removeAttr("height");e.data("aspect-ratio",t.width/t.height);return l(e)});return}D/d>=e.data("aspect-ratio")?e.css({height:"auto",width:"100%"}):e.css({height:"100%",width:"auto"});x(e);return T(e)};c=function(t){return t.each(function(t){e(this).width(D).height(d);e(this).css({left:D});return l(e("img",this).not("."+O.options.classes.preserve))})};p=function(){return P.size()===1?1:3};b=function(){var e;e=P.current+1;e===P.size()&&(e=0);return e};S=function(){var e;e=P.current-1;e<0&&(e=P.size()-1);return e};_=function(e){switch(!0){case/next/.test(e):return b();case/prev/.test(e):return S();case/\d/.test(e):return e;default:return!1}};w=function(e){e==null&&(e=window.location.hash);e=e.replace(/^#/,"");if(e)return+e};E=function(e){e==null&&(e=-1);v&&P.current>=0&&e<0&&(e=P.current);P.current=e;P.next=b();P.prev=S();return!1};h=function(t,n){var u,a,f,l,c;c=_(t);if(c>P.size()-1)return;f=D*2;u=-f;a=P.current;if(t==="prev"||t<a){f=0;u=0}l=f;r.removeClass("current").eq(c).addClass("current").css({left:l,display:"block"});o.children().removeClass("current").eq(c).addClass("current");return s.animate({useTranslate3d:P.mobile,left:u},P.options.slide_speed,P.options.slide_easing,function(){E(c);if(P.size()>1){s.css({left:-D});r.eq(c).css({left:D,zIndex:2});a>=0&&r.eq(a).css({left:D,display:"none",zIndex:0})}P.options.hashchange&&(window.location.hash=P.current);typeof n=="function"&&n();A();P.animating=!1;if(v)return i.trigger("animated.slides");v=!0;e("body").css("overflow","visible");i.fadeIn("fast");return i.trigger("init.slides")})};this.$el=e(t);this.animate=function(e,t){e==null&&(e="next");if(P.animating)return;P.animating=!0;return h(e,t)};this.update=function(){r=i.children();c(r);N();L();r.eq(P.current).css({display:"block"});E(P.current);a();M();return i.trigger("updated.slides")};this.destroy=function(){return e(t).removeData()};this.size=function(){return i.children().length};this.stop=function(){clearInterval(P.play_id);delete P.play_id;return i.trigger("stopped.slides")};this.start=function(){N();P.options.hashchange&&u.trigger("hashchange");P.animate("next");if(P.options.play){P.play_id&&P.stop();P.play_id=setInterval(function(){return P.animate("next")},P.options.play)}return i.trigger("started.slides")};u.on("hashchange",function(e){var t;t=w();if(t>=0&&t!==P.current)return P.animate(t)}).on("resize",function(t){D=u.width();d=u.height();C();c(r);return e("body").css({overflow:"visible"})});e(document).on("click","."+this.options.classes.nav+" a",function(t){O.options.hashchange||t.preventDefault();O.stop();return e(this).hasClass("next")?O.animate("next"):O.animate("prev")}).on("click","."+this.options.classes.pagination+" a",function(e){var t;if(!O.options.hashchange){e.preventDefault();t=w(this.hash);return O.animate(t)}});return m()};e.fn[n]=function(r,i){var s;s=[];this.each(function(){var o,u,a;o=e(this);u=o.data(n);a=typeof r=="object"&&r;u||(s=o.data(n,u=new t(this,a)));if(typeof r=="string"){s=u[r];if(typeof s=="function")return s=s.call(this,i)}});return s}}).call(this);